<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extra Recipes for Text Processing â€¢ textrecipes</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="tidyverse-2.css" rel="stylesheet">
<meta property="og:title" content="Extra Recipes for Text Processing">
<meta property="og:description" content="Converting text to numerical features requires
    specifically created procedures, which are implemented as steps
    according to the recipes package. These steps allows for
    tokenization, filtering, counting (tf and tfidf) and feature hashing.">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="index.html">textrecipes</a>
        <div class="info">
          <span class="partof">part of <a href="https://github.com/tidymodels">tidymodels</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.0.2.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/cookbook---using-more-complex-recipes-involving-text.html">Cookbook - Using more complex recipes involving text</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/tidymodels/textrecipes">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="textrecipes" class="section level1">

<!-- badges: start -->

<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p><strong>textrecipes</strong> contain extra steps for the <a href="https://CRAN.R-project.org/package=recipes"><code>recipes</code></a> package for preprocessing text data.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the released version of textrecipes from <a href="https://CRAN.R-project.org">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"textrecipes"</span>)</a></code></pre></div>
<p>Install the development version from GitHub with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="st">"devtools"</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">install_github</span>(<span class="st">"tidymodels/textrecipes"</span>)</a></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>In the following example we will go through the steps needed, to convert a character variable to the TF-IDF of its tokenized words after removing stopwords, and, limiting ourself to only the 100 most used words. The preprocessing will be conducted on the variable <code>essay0</code> and <code>essay1</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(recipes)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(textrecipes)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(okc_text)</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">okc_rec &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/recipes/man/recipe.html">recipe</a></span>(<span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> okc_text) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="reference/step_tokenize.html">step_tokenize</a></span>(essay0, essay1) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Tokenizes to words by default</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="reference/step_stopwords.html">step_stopwords</a></span>(essay0, essay1) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Uses the english snowball list by default</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="st">  </span><span class="kw"><a href="reference/step_tokenfilter.html">step_tokenfilter</a></span>(essay0, essay1, <span class="dt">max_tokens =</span> <span class="dv">100</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="st">  </span><span class="kw"><a href="reference/step_tfidf.html">step_tfidf</a></span>(essay0, essay1)</a>
<a class="sourceLine" id="cb3-11" data-line-number="11">   </a>
<a class="sourceLine" id="cb3-12" data-line-number="12">okc_obj &lt;-<span class="st"> </span>okc_rec <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/recipes/man/prep.html">prep</a></span>(<span class="dt">training =</span> okc_text)</a>
<a class="sourceLine" id="cb3-14" data-line-number="14">   </a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/recipes/man/bake.html">bake</a></span>(okc_obj, okc_text), <span class="dt">list.len =</span> <span class="dv">15</span>)</a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt; Classes 'tbl_df', 'tbl' and 'data.frame':    750 obs. of  208 variables:</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt;  $ essay2                 : Factor w/ 749 levels "- being myself. i'm comfortable in my own skin.&lt;br /&gt;\n- cooking, eating and washing dishes&lt;br /&gt;\n- sleeping &amp;"| __truncated__,..: 743 574 595 385 109 367 719 721 225 449 ...</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt;  $ essay3                 : Factor w/ 737 levels "... is how batman i am.&lt;br /&gt;\n&lt;br /&gt;\ni'm a huge geek.&lt;br /&gt;\n&lt;br /&gt;\nrecently i've heard \"you're like a stra"| __truncated__,..: 655 192 523 403 675 698 51 46 417 309 ...</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt;  $ essay4                 : Factor w/ 750 levels "- wealth of nations, the social contract, the prince.&lt;br /&gt;\n&lt;br /&gt;\n- coming to america, willy wonka and the c"| __truncated__,..: 611 634 695 638 104 113 378 86 293 323 ...</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt;  $ essay5                 : Factor w/ 750 levels "- a tent&lt;br /&gt;\n- a good pillow&lt;br /&gt;\n- a funny hat in cold weather&lt;br /&gt;\n- genuinely good and trustworthy fr"| __truncated__,..: 344 237 536 271 7 383 128 52 688 750 ...</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt;  $ essay6                 : Factor w/ 749 levels "- being happy with simple things.&lt;br /&gt;\n- whether lightness is unbearable.&lt;br /&gt;\n- how to get to know someone"| __truncated__,..: 466 105 332 215 568 35 506 480 317 326 ...</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt;  $ essay7                 : Factor w/ 750 levels "-out to dinner.&lt;br /&gt;\n-at the movies.&lt;br /&gt;\n-having drinks at a spot where i like the atmosphere.&lt;br /&gt;\n-coo"| __truncated__,..: 658 419 50 292 552 248 530 116 144 461 ...</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt;  $ essay8                 : Factor w/ 747 levels "-bad news everybody i received a message from the people of 2135,\nthey said the aliens attacked and devastated"| __truncated__,..: 254 704 622 548 709 497 347 298 76 42 ...</span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="co">#&gt;  $ essay9                 : Factor w/ 743 levels "- &lt;em&gt;you think i'm the bee's knees&lt;/em&gt; (although obviously that\nwon't slim down the pool at all)&lt;br /&gt;\n- &lt;e"| __truncated__,..: 698 643 540 638 530 137 378 320 17 283 ...</span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="co">#&gt;  $ tfidf_essay0_also      : num  0 0 0.0213 0.1888 0 ...</span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="co">#&gt;  $ tfidf_essay0_always    : num  0 0 0 0 0 ...</span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt;  $ tfidf_essay0_amp       : num  0.457 0.567 0 0 0 ...</span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt;  $ tfidf_essay0_anything  : num  0 0 0.108 0 0 ...</span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29"><span class="co">#&gt;  $ tfidf_essay0_area      : num  0 0 0 0 0 ...</span></a>
<a class="sourceLine" id="cb3-30" data-line-number="30"><span class="co">#&gt;  $ tfidf_essay0_around    : num  0 0 0.0327 0 0 ...</span></a>
<a class="sourceLine" id="cb3-31" data-line-number="31"><span class="co">#&gt;  $ tfidf_essay0_art       : num  0 0 0 0 0 ...</span></a>
<a class="sourceLine" id="cb3-32" data-line-number="32"><span class="co">#&gt;   [list output truncated]</span></a></code></pre></div>
</div>
<div id="type-chart" class="section level2">
<h2 class="hasAnchor">
<a href="#type-chart" class="anchor"></a>Type chart</h2>
<p><strong>textrecipes</strong> includes a little departure in design from <strong>recipes</strong>, in the sense that it allows for some input and output to be in the form of list columns. To avoind confusion, here is a table of steps with their expected input and output respectively. Notice how you need to end with numeric for future analysis to work.</p>
<table class="table">
<thead><tr class="header">
<th>Step</th>
<th>Input</th>
<th>Output</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="reference/step_tokenize.html">step_tokenize()</a></code></td>
<td>character</td>
<td>list-column</td>
</tr>
<tr class="even">
<td><code><a href="reference/step_untokenize.html">step_untokenize()</a></code></td>
<td>list-column</td>
<td>character</td>
</tr>
<tr class="odd">
<td><code><a href="reference/step_stem.html">step_stem()</a></code></td>
<td>list-column</td>
<td>list-column</td>
</tr>
<tr class="even">
<td><code><a href="reference/step_stopwords.html">step_stopwords()</a></code></td>
<td>list-column</td>
<td>list-column</td>
</tr>
<tr class="odd">
<td><code><a href="reference/step_tokenfilter.html">step_tokenfilter()</a></code></td>
<td>list-column</td>
<td>list-column</td>
</tr>
<tr class="even">
<td><code><a href="reference/step_tokenmerge.html">step_tokenmerge()</a></code></td>
<td>list-column</td>
<td>list-column</td>
</tr>
<tr class="odd">
<td><code><a href="reference/step_tfidf.html">step_tfidf()</a></code></td>
<td>list-column</td>
<td>numeric</td>
</tr>
<tr class="even">
<td><code><a href="reference/step_tf.html">step_tf()</a></code></td>
<td>list-column</td>
<td>numeric</td>
</tr>
<tr class="odd">
<td><code><a href="reference/step_texthash.html">step_texthash()</a></code></td>
<td>list-column</td>
<td>numeric</td>
</tr>
<tr class="even">
<td><code><a href="reference/step_textfeature.html">step_textfeature()</a></code></td>
<td>character</td>
<td>numeric</td>
</tr>
<tr class="odd">
<td><code><a href="reference/step_sequence_onehot.html">step_sequence_onehot()</a></code></td>
<td>character</td>
<td>numeric</td>
</tr>
<tr class="even">
<td><code><a href="reference/step_word2vec.html">step_word2vec()</a></code></td>
<td>character</td>
<td>numeric</td>
</tr>
</tbody>
</table>
<p>This means that valid sequences includes</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/recipes/man/recipe.html">recipe</a></span>(<span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> data) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/step_tokenize.html">step_tokenize</a></span>(text) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/step_stem.html">step_stem</a></span>(text) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/step_stopwords.html">step_stopwords</a></span>(text) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="st">  </span><span class="kw">step_topwords</span>(text) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="reference/step_tf.html">step_tf</a></span>(text)</a>
<a class="sourceLine" id="cb4-7" data-line-number="7"></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co"># or</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="kw"><a href="https://rdrr.io/pkg/recipes/man/recipe.html">recipe</a></span>(<span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> data) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="st">  </span><span class="kw"><a href="reference/step_tokenize.html">step_tokenize</a></span>(text) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="st">  </span><span class="kw"><a href="reference/step_stem.html">step_stem</a></span>(text) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="reference/step_tfidf.html">step_tfidf</a></span>(text)</a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=textrecipes">https://â€‹cloud.r-project.org/â€‹package=textrecipes</a>
</li>
<li>Browse source code at <br><a href="https://github.com/tidymodels/textrecipes">https://â€‹github.com/â€‹tidymodels/â€‹textrecipes</a>
</li>
<li>Report a bug at <br><a href="https://github.com/tidymodels/textrecipes/issues">https://â€‹github.com/â€‹tidymodels/â€‹textrecipes/â€‹issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Emil Hvitfeldt <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-0679-1945" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/tidymodels/textrecipes"><img src="https://travis-ci.org/tidymodels/textrecipes.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://codecov.io/github/tidymodels/textrecipes?branch=master"><img src="https://codecov.io/gh/tidymodels/textrecipes/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://CRAN.R-project.org/package=textrecipes"><img src="http://www.r-pkg.org/badges/version/textrecipes" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://CRAN.R-project.org/package=textrecipes"><img src="http://cranlogs.r-pkg.org/badges/textrecipes" alt="Downloads"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#maturing"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="Lifecycle: maturing"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="tidyverse">
  <p>textrecipes is a part of the <strong>tidymodels</strong> ecosystem, a collection of modeling packages designed with common APIs and a shared philosophy.</p>
</div>

<div class="author">
  <p>
    Developed by Emil Hvitfeldt.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
</div>

  


  </body>
</html>
